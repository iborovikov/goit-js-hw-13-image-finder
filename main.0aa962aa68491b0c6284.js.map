{"version":3,"sources":["webpack:///./index.js","webpack:///./card-marcup.hbs"],"names":["API_KEY","serchFormRef","document","querySelector","galaryListRef","inputRef","showMoreBtnRef","pageNumber","scrolloptions","top","behavior","makePageMurcup","serchItem","value","fetchCards","cardData","chekInput","insertAdjacentHTML","makeCardMurcup","window","scrollTo","total","error","title","text","fetch","BASE_URL","response","json","page","e","arrayOfCards","hits","cardId","Number","target","getAttribute","object","find","obj","id","index","indexOf","largeImg","largeImageURL","basicLightbox","show","addEventListener","preventDefault","innerHTML","Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.0aa962aa68491b0c6284.js","sourcesContent":["import './styles.css';\r\nimport makeCardMurcup from './card-marcup.hbs';\r\nimport { error } from '@pnotify/core';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\n\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '21303341-d10a6a4fa4d93860f80e51245'\r\n\r\nconst serchFormRef = document.querySelector('.search-form')\r\nconst galaryListRef = document.querySelector('.gallery');\r\nconst inputRef = document.querySelector('.input');\r\nconst showMoreBtnRef = document.querySelector('.show-more-btn');\r\nlet pageNumber = 1;\r\nconst scrolloptions = {\r\n    top: 0,\r\n    behavior: \"smooth\"\r\n};\r\n\r\nserchFormRef.addEventListener('submit', onFormSubmit);\r\nshowMoreBtnRef.addEventListener('click', onShowMoreBtnClick);\r\ngalaryListRef.addEventListener('click', onCardClick)\r\n\r\n\r\nfunction onFormSubmit(e) {\r\n    e.preventDefault();\r\n    resetPage();\r\n   \r\n    pageNumber = 1;\r\n    scrolloptions.top = 0;\r\n\r\n    makePageMurcup();\r\n};\r\n\r\nasync function makePageMurcup() {\r\n    const serchItem = inputRef.value;\r\n    const cardData = await fetchCards(serchItem, pageNumber);\r\n    if (chekInput(serchItem, cardData)) {\r\n        galaryListRef.insertAdjacentHTML('beforeend', makeCardMurcup(cardData));\r\n        window.scrollTo(scrolloptions);\r\n    };\r\n};\r\n\r\nfunction chekInput(serchItem, cardData) {\r\n    if (cardData.total === 0) {\r\n        notifaicationPhotoNotFound()\r\n        return \r\n    } else if (serchItem === '') {\r\n        notifaicationOnAmptySerch()\r\n        return \r\n    } else {\r\n        return true\r\n    }\r\n    \r\n}\r\n\r\nasync function fetchCards(serchItem, pageNumber) {\r\n    try {\r\n    const response = await fetch(`${BASE_URL}?image_type=photo&orientation=horizontal&q=${serchItem}&page=${pageNumber}&per_page=12&key=${API_KEY}`);\r\n    const page = await response.json();\r\n    return page;\r\n} catch (err) {\r\n    return error({\r\n        title: 'Ошибка!',\r\n        text: `${err}`\r\n    });\r\n    };\r\n};\r\n\r\nfunction onShowMoreBtnClick() { \r\n    pageNumber += 1;\r\n    scrolloptions.top += 945;\r\n    makePageMurcup();\r\n};\r\n\r\nfunction resetPage() {\r\n    galaryListRef.innerHTML = '';\r\n};\r\n\r\nfunction notifaicationOnAmptySerch(serchItem) {\r\n    return error({\r\n        title: 'Ошибка!',\r\n        text: 'Заполните поле поиска!'\r\n    });\r\n};\r\n\r\nfunction notifaicationPhotoNotFound() {\r\n    return error({\r\n        title: 'Ошибка!',\r\n        text: 'Изображение не найдено!'\r\n    });\r\n};\r\n\r\nasync function onCardClick(e) {\r\n    const serchItem = inputRef.value;\r\n    const cardData = await fetchCards(serchItem, pageNumber);\r\n    const arrayOfCards = cardData.hits;\r\n    const cardId = Number(e.target.getAttribute('id'));\r\n    const object = arrayOfCards.find(obj => obj.id === cardId);\r\n    const index = arrayOfCards.indexOf(object);\r\n    const largeImg = arrayOfCards[index].largeImageURL;\r\n\r\n    const instance = basicLightbox.create(`<img src=\"${largeImg}\" width=\"800\" height=\"auto\">`);\r\n    instance.show();\r\n}\r\n\r\n","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"card-img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\" id=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":27,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}